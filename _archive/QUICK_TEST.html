<!DOCTYPE html>
<html>
<head>
    <title>ROI Calculator Test</title>
</head>
<body>
    <h1>ROI Calculator - Quick Test</h1>

    <h2>Test 1: Add Test Data to localStorage</h2>
    <button onclick="addTestData()">Add Test Calculator Data</button>
    <p id="result1"></p>

    <h2>Test 2: Check localStorage</h2>
    <button onclick="checkLocalStorage()">Check localStorage</button>
    <pre id="result2"></pre>

    <h2>Test 3: Go to Thank You Page</h2>
    <button onclick="goToThankYou()">Go to English Thank You Page</button>
    <button onclick="goToThankYouPL()">Go to Polish Thank You Page</button>

    <h2>Test 4: Clear localStorage</h2>
    <button onclick="clearData()">Clear Calculator Data</button>

    <script>
        function addTestData() {
            const testData = {
                projectValue: 1000000,
                savings: 150000,
                roi: 15,
                currency: 'EUR',
                project_type: 'commercial',
                timeline: 'standard',
                variance: 10,
                breakdown: {
                    timeSavings: 40000,
                    accuracySavings: 35000,
                    reworkSavings: 40000,
                    changeOrderSavings: 35000,
                    bimCost: 10000
                },
                timestamp: new Date().toISOString(),
                name: 'Test User',
                email: 'test@example.com',
                company: 'Test Company'
            };

            try {
                localStorage.setItem('bimtakeoff_calculator_data', JSON.stringify(testData));
                document.getElementById('result1').textContent = '‚úÖ Test data added to localStorage!';
                document.getElementById('result1').style.color = 'green';
            } catch (e) {
                document.getElementById('result1').textContent = '‚ùå Error: ' + e.message;
                document.getElementById('result1').style.color = 'red';
            }
        }

        function checkLocalStorage() {
            const data = localStorage.getItem('bimtakeoff_calculator_data');
            if (data) {
                document.getElementById('result2').textContent = JSON.stringify(JSON.parse(data), null, 2);
                document.getElementById('result2').style.color = 'green';
            } else {
                document.getElementById('result2').textContent = 'No data found in localStorage';
                document.getElementById('result2').style.color = 'red';
            }
        }

        function goToThankYou() {
            window.location.href = 'https://bimtakeoff.com/resources/roi-calculator-thank-you.html';
        }

        function goToThankYouPL() {
            window.location.href = 'https://bimtakeoff.com/pl/zasoby/kalkulator-roi-dziekujemy.html';
        }

        function clearData() {
            localStorage.removeItem('bimtakeoff_calculator_data');
            alert('Calculator data cleared!');
        }
    </script>

    <hr>
    <h2>Instructions:</h2>
    <ol>
        <li>Click "Add Test Calculator Data" to add sample data to localStorage</li>
        <li>Click "Check localStorage" to verify the data was saved</li>
        <li>Click one of the "Go to Thank You Page" buttons</li>
        <li>The thank you page should load with the test data and generate a PDF</li>
    </ol>

    <h2>What to look for in browser console:</h2>
    <pre>
On Calculator page after submit:
üíæ Saved calculator data to localStorage
‚úÖ Verified localStorage save
üìç Current path: /resources/roi-calculator.html
üåç Language detected: English
üöÄ Redirecting to: roi-calculator-thank-you.html

On Thank You page:
üéâ Thank you page DOMContentLoaded fired
üíæ LocalStorage data: {"projectValue":1000000,...}
üìä Loading calculator data...
‚úÖ Parsed calculator data
üîç jsPDF loading check
‚úÖ jsPDF loaded successfully from local file
‚è∞ Auto-generating PDF after 1.5 second delay...
üéØ attemptPDFGeneration() called
üöÄ Generating PDF...
    </pre>
</body>
</html>
